<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>FIRE 3</title>
</head>
<body>
  <div id="info"></div>
  <div id="info2"></div>
  <div id="cude"></div>
  <div id="map"></div>

  <style>
    *{
      margin: 0;
      padding: 0;
    }

    /* [ MAP ] */
    #map{
      border: 1px solid red;
      position: absolute;
      margin: 50px;
      width: 2000px;
      height: 2000px;
    }
  </style>

  <script>
    /* [ ЗАПРЕТИТЬ ONCONTEXTMENU ] */
    document.oncontextmenu = function(){ 
      document.location = 'fire3.html'; 
      return false; 
    }

    /* [ INFO ] */
    function info(){
      let a = document.getElementById('info');
      a.style.width = '100%';
      a.style.height = '30px';
      a.style.position = 'relative';
      a.style.zIndex = '2';
      a.style.textAlign = 'center';
      a.style.lineHeight = '1.8';
      a.style.background = 'whitesmoke';
      a.style.border = '1px solid black';
    } info();

    /* [ INFO ] */
    function info2(){
      let a = document.getElementById('info2');
      a.style.width = '100%';
      a.style.height = '30px';
      a.style.position = 'relative';
      a.style.zIndex = '2';
      a.style.textAlign = 'center';
      a.style.lineHeight = '1.8';
      a.style.background = 'whitesmoke';
      a.style.border = '1px solid black';
    } //info2();

    /* [ MARCER ] */
    function marker(x,y,z){
      let a = document.createElement('div');
      a.style.margin = y+'px 0 0 '+x+'px';
      a.style.width = '2px';
      a.style.height = '2px';
      a.style.background = (z) ? z : 'red';
      a.style.position = 'absolute';
      a.style.zIndex = 3;
      a.setAttribute('class', 'marker');
      document.body.append(a);
    } 



    /* [ РАБОТАЕТ ] */
    let p = [0,0];

    /* [ ... ] */
    let x = 200, y = 150;

    /* [ CREATE USER ] */
    let u = document.createElement('img');
    u.style.margin = x+'px 0 0 '+y+'px'; 
    u.style.border = '1px solid black';
    u.style.position = 'absolute';
    u.style.zIndex = 1;
    u.style.width = '50px';
    u.style.height = '50px';
    u.src = 'img/usr/1/0.png';
    u.setAttribute('id', 'user');
    document.body.append(u);

    // let x2 = 600, y2 = 200;
    // marker(x2,y2,'green');
    
    document.onclick = (e) => {

      p[0] = x-25;
      p[1] = y+75;

      //marker(p[0],p[1],'red');
      let a = document.createElement('div');
      a.style.margin = p[1]+'px 0 0 '+p[0]+'px';
      a.style.width = '2px';
      a.style.height = '2px';
      a.style.background = 'red';
      a.style.position = 'absolute';
      a.style.zIndex = 3;
      document.body.append(a);

      marker(e.pageX,e.pageY,'green');

      let x1 = 0, y1 = 0, 
      k = (e.pageY-p[1])/(e.pageX-p[0]);

      for(let i=0; i<20; i++){
        (e.pageX>p[0] ? x1+=10 : x1-=10 ); y1=(k*x1);
        if(y1>-200 && y1<200){ 
          marker((x1+p[0]),(y1+p[1]),'black');  
        }
      }

    }



    /* [ ONMOUSEMOVE ] */
    document.onmousemove = (e) => {
      document.getElementById('info').innerHTML = 'x: '+e.pageX+' y: '+e.pageY;
    }
   



  </script>
</body>
</html>